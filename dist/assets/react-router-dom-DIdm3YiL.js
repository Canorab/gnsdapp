import{r as i,R as B}from"./react-eX7k_oyb.js";import{R as H}from"./react-dom-BE5TJDhq.js";import{m as K,D as W,a as G,R as X,u as Y,b as j,c as I,N as q,d as J,e as Q}from"./react-router-zaz7yv4n.js";import{c as Z,b as $,E as ee,s as te,d as O}from"./@remix-run-CAT8zpu_.js";/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C(){return C=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},C.apply(this,arguments)}function re(e,r){if(e==null)return{};var t={},a=Object.keys(e),n,s;for(s=0;s<a.length;s++)n=a[s],!(r.indexOf(n)>=0)&&(t[n]=e[n]);return t}function ne(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ae(e,r){return e.button===0&&(!r||r==="_self")&&!ne(e)}function U(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((r,t)=>{let a=e[t];return r.concat(Array.isArray(a)?a.map(n=>[t,n]):[[t,a]])},[]))}function ie(e,r){let t=U(e);return r&&r.forEach((a,n)=>{t.has(n)||r.getAll(n).forEach(s=>{t.append(n,s)})}),t}const se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],oe="6";try{window.__reactRouterVersion=oe}catch{}function Le(e,r){return Z({basename:r==null?void 0:r.basename,future:C({},r==null?void 0:r.future,{v7_prependBasename:!0}),history:$({window:r==null?void 0:r.window}),hydrationData:(r==null?void 0:r.hydrationData)||le(),routes:e,mapRouteProperties:K,window:r==null?void 0:r.window}).initialize()}function le(){var e;let r=(e=window)==null?void 0:e.__staticRouterHydrationData;return r&&r.errors&&(r=C({},r,{errors:ce(r.errors)})),r}function ce(e){if(!e)return null;let r=Object.entries(e),t={};for(let[a,n]of r)if(n&&n.__type==="RouteErrorResponse")t[a]=new ee(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let s=window[n.__subType];if(typeof s=="function")try{let l=new s(n.message);l.stack="",t[a]=l}catch{}}if(t[a]==null){let s=new Error(n.message);s.stack="",t[a]=s}}else t[a]=n;return t}const ue=i.createContext({isTransitioning:!1}),fe=i.createContext(new Map),de="startTransition",F=B[de],he="flushSync",D=H[he];function ve(e){F?F(e):e()}function P(e){D?D(e):e()}class pe{constructor(){this.status="pending",this.promise=new Promise((r,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",r(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}}function be(e){let{fallbackElement:r,router:t,future:a}=e,[n,s]=i.useState(t.state),[l,d]=i.useState(),[f,o]=i.useState({isTransitioning:!1}),[u,m]=i.useState(),[h,T]=i.useState(),[w,_]=i.useState(),E=i.useRef(new Map),{v7_startTransition:x}=a||{},L=i.useCallback(c=>{x?ve(c):c()},[x]),v=i.useCallback((c,S)=>{let{deletedFetchers:p,unstable_flushSync:k,unstable_viewTransitionOpts:y}=S;p.forEach(g=>E.current.delete(g)),c.fetchers.forEach((g,z)=>{g.data!==void 0&&E.current.set(z,g.data)});let N=t.window==null||typeof t.window.document.startViewTransition!="function";if(!y||N){k?P(()=>s(c)):L(()=>s(c));return}if(k){P(()=>{h&&(u&&u.resolve(),h.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:y.currentLocation,nextLocation:y.nextLocation})});let g=t.window.document.startViewTransition(()=>{P(()=>s(c))});g.finished.finally(()=>{P(()=>{m(void 0),T(void 0),d(void 0),o({isTransitioning:!1})})}),P(()=>T(g));return}h?(u&&u.resolve(),h.skipTransition(),_({state:c,currentLocation:y.currentLocation,nextLocation:y.nextLocation})):(d(c),o({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}))},[t.window,h,u,E,L]);i.useLayoutEffect(()=>t.subscribe(v),[t,v]),i.useEffect(()=>{f.isTransitioning&&!f.flushSync&&m(new pe)},[f]),i.useEffect(()=>{if(u&&l&&t.window){let c=l,S=u.promise,p=t.window.document.startViewTransition(async()=>{L(()=>s(c)),await S});p.finished.finally(()=>{m(void 0),T(void 0),d(void 0),o({isTransitioning:!1})}),T(p)}},[L,l,u,t.window]),i.useEffect(()=>{u&&l&&n.location.key===l.location.key&&u.resolve()},[u,h,n.location,l]),i.useEffect(()=>{!f.isTransitioning&&w&&(d(w.state),o({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),_(void 0))},[f.isTransitioning,w]),i.useEffect(()=>{},[]);let R=i.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:c=>t.navigate(c),push:(c,S,p)=>t.navigate(c,{state:S,preventScrollReset:p==null?void 0:p.preventScrollReset}),replace:(c,S,p)=>t.navigate(c,{replace:!0,state:S,preventScrollReset:p==null?void 0:p.preventScrollReset})}),[t]),b=t.basename||"/",M=i.useMemo(()=>({router:t,navigator:R,static:!1,basename:b}),[t,R,b]);return i.createElement(i.Fragment,null,i.createElement(W.Provider,{value:M},i.createElement(G.Provider,{value:n},i.createElement(fe.Provider,{value:E.current},i.createElement(ue.Provider,{value:f},i.createElement(X,{basename:b,location:n.location,navigationType:n.historyAction,navigator:R,future:{v7_relativeSplatPath:t.future.v7_relativeSplatPath}},n.initialized||t.future.v7_partialHydration?i.createElement(me,{routes:t.routes,future:t.future,state:n}):r))))),null)}function me(e){let{routes:r,future:t,state:a}=e;return Y(r,void 0,a,t)}const we=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Re=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_e=i.forwardRef(function(r,t){let{onClick:a,relative:n,reloadDocument:s,replace:l,state:d,target:f,to:o,preventScrollReset:u,unstable_viewTransition:m}=r,h=re(r,se),{basename:T}=i.useContext(q),w,_=!1;if(typeof o=="string"&&Re.test(o)&&(w=o,we))try{let v=new URL(window.location.href),R=o.startsWith("//")?new URL(v.protocol+o):new URL(o),b=te(R.pathname,T);R.origin===v.origin&&b!=null?o=b+R.search+R.hash:_=!0}catch{}let E=J(o,{relative:n}),x=Se(o,{replace:l,state:d,target:f,preventScrollReset:u,relative:n,unstable_viewTransition:m});function L(v){a&&a(v),v.defaultPrevented||x(v)}return i.createElement("a",C({},h,{href:w||E,onClick:_||s?a:L,ref:t,target:f}))});var A;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(A||(A={}));var V;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(V||(V={}));function Se(e,r){let{target:t,replace:a,state:n,preventScrollReset:s,relative:l,unstable_viewTransition:d}=r===void 0?{}:r,f=I(),o=j(),u=Q(e,{relative:l});return i.useCallback(m=>{if(ae(m,t)){m.preventDefault();let h=a!==void 0?a:O(o)===O(u);f(e,{replace:h,state:n,preventScrollReset:s,relative:l,unstable_viewTransition:d})}},[o,f,u,a,n,t,e,s,l,d])}function Pe(e){let r=i.useRef(U(e)),t=i.useRef(!1),a=j(),n=i.useMemo(()=>ie(a.search,t.current?null:r.current),[a.search]),s=I(),l=i.useCallback((d,f)=>{const o=U(typeof d=="function"?d(n):d);t.current=!0,s("?"+o,f)},[s,n]);return[n,l]}export{_e as L,be as R,Le as c,Pe as u};
