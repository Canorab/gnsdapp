import{r as u,j as e}from"./react-eX7k_oyb.js";import{u as S,c as P,s as E}from"./index-B_u7F3TM.js";import{d as T,c as W}from"./@web3modal-BnXlkWgH.js";import{t as U,i as I,e as F,a as k}from"./@wagmi-Cwopbt2N.js";import{y as L,A as O,B as R}from"./viem-DO_zHWKk.js";import{u as D}from"./react-router-dom-DIdm3YiL.js";import{u as G,C as o}from"./react-hook-form-BVuS_7ec.js";import{t as H}from"./@hookform-B4uZ5eeB.js";import{u as M,w as q,B as z,x as n,y as i,z as v,E as J,G as K,H as V,J as _,K as Q,M as X,N as Y,O as Z,F as C}from"./@mui-B-lH2raD.js";import{c as $}from"./react-router-zaz7yv4n.js";import"./@babel-BTUyE5mg.js";import"./react-redux-B2ydUXa7.js";import"./use-sync-external-store-o46NS6CO.js";import"./react-dom-BE5TJDhq.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-9R9LrHOH.js";import"./redux-DITMfSWq.js";import"./immer-BkdjC0q7.js";import"./reselect-BEFkisvr.js";import"./redux-thunk-ClJT1hhx.js";import"./react-copy-to-clipboard-CVAzxf6m.js";import"./copy-to-clipboard-BvYTofsP.js";import"./toggle-selection-BHUZwh74.js";import"./jwt-decode-VWaDGczM.js";import"./lucide-react-DofsI3O2.js";import"./uuid-D8aEg3BZ.js";import"./boxicons-DYxgBJvX.js";import"./zod-dIKOytT1.js";import"./@fvilers-C36Jf4Wd.js";import"./zustand-BxVvYF66.js";import"./eventemitter3-B2QLvKQr.js";import"./mipd-CIcDX0W7.js";import"./@remix-run-CAT8zpu_.js";import"./clsx-B-dksMZM.js";import"./@emotion-CTR4nhAa.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./react-transition-group-BwIbI4gd.js";import"./bignumber.js-DOH-f-tm.js";import"./buffer-EBb79ogF.js";import"./base64-js-D0UyVEDn.js";import"./ieee754-DSYfm7We.js";import"./valtio-D-UtsqsE.js";import"./proxy-compare-DDw08AJZ.js";import"./dayjs-D3dD73DO.js";import"./qrcode-CGiDONbL.js";import"./encode-utf8-Cn5aGd7v.js";import"./dijkstrajs-D_NXgYpA.js";const A="45889a474345288a14a9a0d93756e1f0",ee={name:"Gtxstream",description:"Connect to Gtxstream",url:"https://app.gtxstream.com",icons:["https://avatars.githubusercontent.com/u/37784886"]},te=[L,O,R],x=T({chains:te,projectId:A,metadata:ee});U(x);const re=W({wagmiConfig:x,projectId:A,enableAnalytics:!0,enableOnramp:!0});async function se(){I(x).isConnected?await F(x):await re.open()}function ae({wallet:p,referrerUsername:j}){var w,N;const g=M(),c=$(),[b,{isSuccess:f}]=S();u.useEffect(()=>{f&&c("/dash/users")},[f,c]);const{handleSubmit:h,control:a,setError:m,formState:{errors:r}}=G({resolver:H(E),mode:"all",defaultValues:{firstName:"",lastName:"",username:"",password:"",email:"",wallet:p,referrerUsername:j,terms:!1},values:{firstName:"",lastName:"",username:"",password:"",email:"",wallet:p,referrerUsername:j,terms:!1},resetOptions:{keepDirty:!0,keepErrors:!0}}),B=u.useCallback(async s=>{var t,y;try{const d={...s},l=await b(d);((t=l==null?void 0:l.error)==null?void 0:t.status)===409&&m("username",{type:"server",message:"Username taken, try another one !"}),((y=l==null?void 0:l.error)==null?void 0:y.status)===401&&m("referrerUsername",{type:"server",message:"Invalid affiliate username."})}catch(d){(d==null?void 0:d.status)==="FETCH_ERROR"&&m("root.serverError",{type:"server",message:"Network or internet Error"})}},[]);return e.jsxs("div",{children:[e.jsxs("div",{className:"title-wrapper w-full flex justify-between items-center mb-8 ",children:[e.jsx("img",{src:"/images/gtx-stream-logo1.png",className:"w-32",alt:""}),e.jsx("h2",{className:"text-2xl font-bold text-center",children:"Sign Up"})]}),e.jsx(q,{theme:P(g),children:e.jsx("form",{onSubmit:h(B),children:e.jsxs(z,{component:"div",sx:{p:"2px 4px",display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:350,boxShadow:0},children:[e.jsx(o,{name:"firstName",control:a,render:({field:s})=>{var t;return e.jsx(n,{id:"firstName",label:"First Name",variant:"filled",type:"text",error:!!r.firstName,helperText:(t=r.firstName)==null?void 0:t.message,...s,fullWidth:!0,color:"secondary",InputProps:{startAdornment:e.jsx(i,{position:"start",children:e.jsx(v,{})})}})}}),e.jsx(o,{name:"lastName",control:a,render:({field:s})=>{var t;return e.jsx(n,{id:"lastName",label:"Last Name",variant:"filled",type:"text",error:!!r.lastName,helperText:(t=r.lastName)==null?void 0:t.message,...s,fullWidth:!0,InputProps:{startAdornment:e.jsx(i,{position:"start",children:e.jsx(v,{})})}})}}),e.jsx(o,{name:"username",control:a,render:({field:s})=>{var t;return e.jsx(n,{id:"username",label:"UserName",variant:"filled",type:"text",error:!!r.username,helperText:(t=r.username)==null?void 0:t.message,...s,fullWidth:!0,InputProps:{startAdornment:e.jsx(i,{position:"start",children:e.jsx(v,{})}),autoComplete:"off"}})}}),e.jsx(o,{name:"password",control:a,render:({field:s})=>{var t;return e.jsx(n,{id:"password",label:"Password",variant:"filled",type:"password",error:!!r.password,helperText:(t=r.password)==null?void 0:t.message,autoComplete:"off",...s,fullWidth:!0,InputProps:{startAdornment:e.jsx(i,{position:"start",children:e.jsx(J,{})})}})}}),e.jsx(o,{name:"email",control:a,render:({field:s})=>{var t;return e.jsx(n,{id:"email",label:"Email",variant:"filled",type:"email",error:!!r.email,helperText:(t=r.email)==null?void 0:t.message,...s,fullWidth:!0,InputProps:{startAdornment:e.jsx(i,{position:"start",children:e.jsx(K,{})})}})}}),e.jsx(o,{name:"wallet",control:a,render:({field:s})=>{var t;return e.jsx(n,{id:"wallet",label:"Wallet",variant:"filled",type:"text",error:!!r.wallet,helperText:(t=r.wallet)==null?void 0:t.message,disabled:!0,...s,fullWidth:!0,InputProps:{startAdornment:e.jsx(i,{position:"start",children:e.jsx(V,{})})}})}}),e.jsx(o,{name:"referrerUsername",control:a,render:({field:s})=>{var t;return e.jsx(n,{id:"referrerUsername",label:"Referrer",variant:"filled",type:"text",error:!!r.referrerUsername,helperText:(t=r.referrerUsername)==null?void 0:t.message,disabled:!0,...s,fullWidth:!0,InputProps:{startAdornment:e.jsx(i,{position:"start",children:e.jsx(_,{})})}})}}),e.jsx(o,{name:"terms",control:a,render:({field:s})=>e.jsxs(Q,{error:!!r.terms,variant:"outlined",children:[e.jsx(X,{...s,control:e.jsx(Y,{...s}),label:"Accept terms and conditions"}),r.terms&&e.jsxs(Z,{children:[" ",r.terms.message," "]})]})}),e.jsx(C,{type:"submit",variant:"contained",className:"btn",children:"Submit"}),e.jsx("div",{children:e.jsx("p",{style:{fontWeight:"bold"},children:(N=(w=r.root)==null?void 0:w.serverError)==null?void 0:N.message})})]})})})]})}function et(){const[p,j]=D(),g=p.get("ref");u.useState(!1);const[c,b]=u.useState(""),[f,h]=u.useState("Connect");console.log(p.get("ref"));const a=async()=>{await se()};return k(x,{onChange(m){b(m.address??""),m.isConnected?h("Disconnect"):h("Connect")}}),e.jsx("div",{className:"signup-page",children:e.jsxs("div",{className:"form-wrapper",children:[e.jsxs("div",{className:"connect-box mb-12",children:[e.jsxs("p",{children:[" ",c," "]}),e.jsx(C,{variant:"contained",className:"connect-btn",onClick:a,children:f})]}),e.jsx(ae,{wallet:c,referrerUsername:g})]})})}export{et as default};
