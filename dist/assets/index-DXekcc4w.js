function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SignupPage-BIxUpNf1.js","assets/react-eX7k_oyb.js","assets/@babel-BTUyE5mg.js","assets/@web3modal-BnXlkWgH.js","assets/bignumber.js-DOH-f-tm.js","assets/@wagmi-Cwopbt2N.js","assets/zustand-BxVvYF66.js","assets/viem-DO_zHWKk.js","assets/eventemitter3-B2QLvKQr.js","assets/mipd-CIcDX0W7.js","assets/buffer-EBb79ogF.js","assets/base64-js-D0UyVEDn.js","assets/ieee754-DSYfm7We.js","assets/zod-dIKOytT1.js","assets/valtio-D-UtsqsE.js","assets/proxy-compare-DDw08AJZ.js","assets/dayjs-D3dD73DO.js","assets/qrcode-CGiDONbL.js","assets/encode-utf8-Cn5aGd7v.js","assets/dijkstrajs-D_NXgYpA.js","assets/react-hook-form-BVuS_7ec.js","assets/@hookform-B4uZ5eeB.js","assets/@mui-X-K-t_pU.js","assets/clsx-B-dksMZM.js","assets/@emotion-CTR4nhAa.js","assets/hoist-non-react-statics-Buxaj0Kl.js","assets/react-is-8JwjhRSi.js","assets/stylis-NkKAe6Bn.js","assets/react-dom-BE5TJDhq.js","assets/scheduler-CzFDRTuY.js","assets/react-transition-group-BwIbI4gd.js","assets/react-router-zaz7yv4n.js","assets/@remix-run-CAT8zpu_.js","assets/react-router-dom-DIdm3YiL.js","assets/react-redux-B2ydUXa7.js","assets/use-sync-external-store-o46NS6CO.js","assets/@reduxjs-9R9LrHOH.js","assets/redux-DITMfSWq.js","assets/immer-BkdjC0q7.js","assets/reselect-BEFkisvr.js","assets/redux-thunk-ClJT1hhx.js","assets/react-copy-to-clipboard-CVAzxf6m.js","assets/copy-to-clipboard-BvYTofsP.js","assets/toggle-selection-BHUZwh74.js","assets/jwt-decode-VWaDGczM.js","assets/lucide-react-CUEWfaAn.js","assets/uuid-D8aEg3BZ.js","assets/boxicons-DYxgBJvX.js","assets/@fvilers-C36Jf4Wd.js","assets/SignupPage-vVReXN0Y.css","assets/SignupSuccessPage-YdpL_RVu.js","assets/LoginPage-SiKkV3TT.js","assets/LoginPage-CKghBavQ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{j as e,r as i,a as Ce}from"./react-eX7k_oyb.js";import{a as b,u as ts,P as rs}from"./react-redux-B2ydUXa7.js";import{c as as}from"./react-dom-BE5TJDhq.js";import{_ as re}from"./@wagmi-Cwopbt2N.js";import{L as v,c as ns,R as os}from"./react-router-dom-DIdm3YiL.js";import{T as is,a as z,b as M,c as ls,u as Te,B as ae,I as D,d as me,e as he,f as fe,g as xe,h as cs,P as De,i as ds,j as us,k as ms,l as hs,m as fs,D as xs,S as ps,C as R,n as gs,o as js,L as Y,A as ys,p as we,R as Re,q as ke,r as bs,s as vs,t as I,v as pe,w as Ss,x as ge,y as se,z as Ns,E as Cs,V as Ts,F as Ds,G as ws}from"./@mui-X-K-t_pU.js";import{c as Rs,f as ks,a as Ls,b as J,d as As,s as Us}from"./@reduxjs-9R9LrHOH.js";import{a as k}from"./reselect-BEFkisvr.js";import{O as w,c as O,b as ne,f as je,g as Es,h as g}from"./react-router-zaz7yv4n.js";import{C as Is}from"./react-copy-to-clipboard-CVAzxf6m.js";import{j as Ps}from"./jwt-decode-VWaDGczM.js";import{C as Le,a as Ae,X as Ue,M as Ee,H as Ie,U as Pe}from"./lucide-react-CUEWfaAn.js";import{v as ye}from"./uuid-D8aEg3BZ.js";import"./boxicons-DYxgBJvX.js";import{u as $s,C as be}from"./react-hook-form-BVuS_7ec.js";import{z as j}from"./zod-dIKOytT1.js";import{t as Ms}from"./@hookform-B4uZ5eeB.js";import{d as qs}from"./@fvilers-C36Jf4Wd.js";import"./@babel-BTUyE5mg.js";import"./use-sync-external-store-o46NS6CO.js";import"./scheduler-CzFDRTuY.js";import"./zustand-BxVvYF66.js";import"./viem-DO_zHWKk.js";import"./eventemitter3-B2QLvKQr.js";import"./mipd-CIcDX0W7.js";import"./@remix-run-CAT8zpu_.js";import"./clsx-B-dksMZM.js";import"./@emotion-CTR4nhAa.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./react-transition-group-BwIbI4gd.js";import"./redux-DITMfSWq.js";import"./immer-BkdjC0q7.js";import"./redux-thunk-ClJT1hhx.js";import"./copy-to-clipboard-BvYTofsP.js";import"./toggle-selection-BHUZwh74.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();function Fs({cols:r,sortHandler:s,sortDirection:t}){return e.jsx(is,{sx:{"& th":{fontWeight:"bold",fontSize:"0.9rem",color:"#272833"}},children:e.jsx(z,{children:r.map(a=>a.accessorKey==="createdDate"?e.jsx(M,{onClick:()=>{s()},children:e.jsx(ls,{active:!0,direction:t,children:a.header})},a.accessorKey):e.jsx(M,{align:a.accessorKey==="index"?void 0:"right",children:a.header},a.accessorKey))})})}function Os({count:r,page:s,rowsPerPage:t,onPageChange:a}){const n=Te(),o=c=>{a(c,0)},l=c=>{a(c,s-1)},x=c=>{a(c,s+1)},d=c=>{a(c,Math.max(0,Math.ceil(r/t)-1))};return e.jsxs(ae,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(D,{onClick:o,disabled:s===0,"aria-label":"first page",children:n.direction==="rtl"?e.jsx(me,{sx:{color:"#ffff"}}):e.jsx(he,{sx:{color:"#ffff"}})}),e.jsx(D,{onClick:l,disabled:s===0,"aria-label":"previous page",children:n.direction==="rtl"?e.jsx(fe,{sx:{color:"#ffff"}}):e.jsx(xe,{sx:{color:"#ffff"}})}),e.jsx(D,{onClick:x,disabled:s>=Math.ceil(r/t)-1,"aria-label":"next page",children:n.direction==="rtl"?e.jsx(xe,{sx:{color:"#ffff"}}):e.jsx(fe,{sx:{color:"#ffff"}})}),e.jsx(D,{onClick:d,disabled:s>=Math.ceil(r/t)-1,"aria-label":"last page",children:n.direction==="rtl"?e.jsx(he,{sx:{color:"#ffff"}}):e.jsx(me,{sx:{color:"#ffff"}})})]})}function _s(r,s){const t=[];for(const a of r)s.includes(a)&&t.push(a);return t}const H=r=>new Date(r),Bs=r=>new Date(r).toLocaleString("default",{dateStyle:"medium"});function Ks({data:r,cols:s,index:t}){const a=Bs(r.createdAt),n={index:t,createdDate:a,...r},o=[],l=Object.keys(n),x=s.map(c=>c.accessorKey);return _s(x,l).map((c,u)=>(o.push(e.jsx(M,{align:c==="index"||c==="createdDate"?"left":"right",className:c==="domainsCount"||c==="referrerUsername"||c==="name"?"highlightedcell":"",children:n[c]},u)),c)),e.jsx(z,{sx:{"&:last-child td, &:last-child th":{border:0},"& td":{fontSize:"1rem"},"& td.highlightedcell.css-177gid-MuiTableCell-root":{color:" #ffff",fontWeight:"bold"}},children:o},r.id)}function Ws({cols:r,data:s,page:t,rowsPerPage:a}){const n=t>0?Math.max(0,(1+t)*a-s.length):0;return e.jsxs(cs,{children:[s.length===0&&e.jsx(z,{children:e.jsx(M,{component:"td",scope:"row",colSpan:8,children:"No record found"})}),(a>0?s.slice(t*a,t*a+a):s).map((o,l)=>e.jsx(Ks,{data:o,cols:r,index:l+1},o.id)),n>0&&e.jsx(z,{style:{height:53*n},children:e.jsx(M,{colSpan:6})})]})}function L({cols:r,data:s}){const[t,a]=i.useState(0),[n,o]=i.useState(10),l=(p,y)=>{a(y)},x=p=>{o(parseInt(p.target.value,10)),a(0)},[d,c]=i.useState(s),[u,h]=i.useState("asc");i.useEffect(()=>{c(s)},[s]);const m=(p,y)=>{switch(y){case"desc":return p.sort((K,W)=>H(K.createdAt)<H(W.createdAt)?-1:1);case"asc":default:return p.sort((K,W)=>H(K.createdAt)>H(W.createdAt)?-1:1)}},f=()=>{c(m(s,u)),h(u==="asc"?"desc":"asc")};return e.jsxs(De,{sx:{height:"100%",background:"rgb(20, 20, 65);"},children:[e.jsx(ds,{sx:{maxHeight:500},children:e.jsxs(us,{sx:{minWidth:650,"& th":{background:"rgb(255, 255, 255);"},"& td":{color:"#ffff"}},"aria-label":"Table",stickyHeader:!0,children:[e.jsx(Fs,{cols:r,sortHandler:f,sortDirection:u}),e.jsx(Ws,{data:d,cols:r,page:t,rowsPerPage:n})]})}),e.jsx(ms,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],component:"div",count:s.length,rowsPerPage:n,page:t,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0}},onPageChange:l,onRowsPerPageChange:x,ActionsComponent:Os,sx:{color:"#ffff"}})]})}function _({changeHandler:r,label:s}){return e.jsxs(De,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"80%",justifySelf:"center",alignSelf:"center"},children:[e.jsx(D,{sx:{p:"10px"},"aria-label":"menu",children:e.jsx(hs,{})}),e.jsx(fs,{sx:{ml:1,flex:1},placeholder:s,inputProps:{"aria-label":`${s}`},onChange:t=>{r(t.target.value)}}),e.jsx(xs,{sx:{height:28,m:.5},orientation:"vertical"}),e.jsx(D,{type:"button",sx:{p:"10px"},"aria-label":"search",children:e.jsx(ps,{})})]})}const X=[{header:"SN",accessorKey:"index",footer:"SN"},{header:"Date",accessorKey:"createdDate",footer:"Date"},{header:"Username",accessorKey:"username",footer:"Username"},{header:"First Name",accessorKey:"firstName",footer:"First Name"},{header:"Last Name",accessorKey:"lastName",footer:"Last Name"},{header:"Domains",accessorKey:"domainsCount",footer:"Domains"},{header:"Wallet",accessorKey:"wallet",footer:"Wallet"},{header:"Referrer",accessorKey:"referrerUsername",footer:"Referrer"}],$e=[{header:"SN",accessorKey:"index",footer:"SN"},{header:"Date",accessorKey:"createdDate",footer:"Date"},{header:"Domain",accessorKey:"name",footer:"Domain"},{header:"Username",accessorKey:"username",footer:"Username"},{header:"First Name",accessorKey:"firstName",footer:"First Name"},{header:"Last Name",accessorKey:"lastName",footer:"Last Name"}],Hs=[{header:"SN",accessorKey:"index",footer:"SN"},{header:"Date",accessorKey:"createdDate",footer:"Date"},{header:"Username",accessorKey:"username",footer:"Username"},{header:"First Name",accessorKey:"firstName",footer:"First Name"},{header:"Last Name",accessorKey:"lastName",footer:"Last Name"},{header:"Wallet",accessorKey:"wallet",footer:"Wallet"},{header:"Total Referrals",accessorKey:"totalReferralsCount",footer:"Total Referrals"},{header:"Today Referrals",accessorKey:"todayReferralsCount",footer:"Today Referrals"},{header:"Total Domains",accessorKey:"totalDomainsCount",footer:"Total Domains"},{header:"Today Domains",accessorKey:"todayDomainsCount",footer:"Today Domains"}];function B(r,s=1e3){let t;return(...a)=>{clearTimeout(t),t=setTimeout(()=>{r(...a)},s)}}const Qs={token:""},Me=Rs({name:"auth",initialState:Qs,reducers:{setCredentials(r,s){r.token=s.payload.accessToken},logOut(r,s){r.token=""}}}),{setCredentials:oe,logOut:zs}=Me.actions,Gs=Me.reducer,qe=r=>r.auth.token,te=ks({baseUrl:"https://gnsserv1.onrender.com/api/",credentials:"include",prepareHeaders(r,{getState:s}){const{token:t}=s().auth;return t&&r.set("authorization",`Bearer ${t}`),r}}),Vs=async(r,s,t)=>{var n,o;let a=await te(r,s,t);if(((n=a==null?void 0:a.error)==null?void 0:n.status)===403){const l=await te("auth/refresh",s,t);if(l!=null&&l.data)s.dispatch(oe({...l.data})),a=await te(r,s,t);else return((o=l==null?void 0:l.error)==null?void 0:o.status)===403&&(l.error.data.message="Your login has expired "),l}return a},N=Ls({reducerPath:"gnsApi",baseQuery:Vs,tagTypes:["User","Domain"],refetchOnMountOrArgChange:!0,refetchOnReconnect:!0,endpoints:r=>({})}),ie=J({}),Fe=ie.getInitialState(),Oe=N.injectEndpoints({endpoints:r=>({getUsersWithStats:r.query({query:()=>({url:"users/affiliates",validateStatus:(s,t)=>s.status===200&&!t.isError}),transformResponse(s,t,a){const n=s.map(o=>(o.id=o._id,o.totalReferralsCount=o.referrals.length,o.todayReferralsCount=o.todayReferrals.length,o.totalDomainsCount=o.referralsDomains.length,o.todayDomainsCount=o.todayReferralsDomains.length,o));return ie.setAll(Fe,n)},providesTags(s,t,a){return s!=null&&s.ids?[{type:"User",id:"LIST"},...s.ids.map(n=>({type:"User",id:n}))]:[{type:"User",id:"LIST"}]},forceRefetch({currentArg:s,previousArg:t}){return s!==t}})})}),{useGetUsersWithStatsQuery:Ys}=Oe,Js=Oe.endpoints.getUsersWithStats.select(),Xs=k(Js,r=>r.data),Zs=ie.getSelectors(r=>Xs(r)??Fe);function et(){const[r,s]=i.useState([]),[t,a]=i.useState(""),{isLoading:n,isFetching:o,isSuccess:l,isError:x,error:d}=Ys(),u=b(Zs.selectAll);let h;if((n||o)&&(h=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsx(R,{})})),x&&"status"in d){const f="error"in d?d.error:d.data.message;h=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsxs("p",{className:"errmsg",children:[`${f}`,d.status===403&&e.jsx(v,{style:{fontWeight:"bold"},to:"/",children:"Please login again"})]})})}const m=i.useCallback(B(f=>{a(f)}),[]);return i.useEffect(()=>{if(l)try{const f=u.filter(p=>t.toLowerCase()===""?p:p.username.toLowerCase().includes(t));s(f)}catch(f){console.log(f)}},[t,u]),l&&(h=e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80},children:[e.jsx(_,{changeHandler:m,label:"Search users"}),e.jsx(L,{cols:Hs,data:r})]})),h}function st(){return e.jsx(w,{})}function _e({initials:r,borderRadius:s=60,width:t=60,height:a=60,background:n="#141441"}){return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",background:n,borderRadius:s,width:t,height:a},children:e.jsxs("h4",{className:"text-white font-bold",children:[" ",r," "]})})}function Be(r){var t;const s=(t=r.username)==null?void 0:t.substring(0,2).toLocaleUpperCase();return e.jsxs("div",{className:"profile-info",children:[e.jsx(_e,{initials:s}),e.jsx("h4",{className:"username text-lg font-semibold overflow-hidden",children:r.username})]})}function Ke({username:r,dashTip:s}){return e.jsxs("div",{className:"welcome-block",children:[e.jsxs("h2",{className:"greeting font-bold text-lg",children:["Welcome, ",r]}),e.jsx("h3",{className:"dash-tip",children:s})]})}function We({username:r}){const s=`https://app.gtxstream.com/signup?ref=${r}`,[t,a]=i.useState(""),[n,o]=i.useState(!1);i.useEffect(()=>{a(s)},[]);const l=()=>{o(!0),setTimeout(()=>{o(!1)},2e3)};return e.jsxs("div",{style:{display:"flex",borderWidth:1,borderColor:"#b9b9b9"},className:"ref-link",children:[e.jsx("h2",{className:"text-gray-300 text-xl overflow-hidden aff-link mr-1",children:t}),e.jsx(Is,{text:t,onCopy:l,children:n?e.jsx(gs,{className:"text-green-400 cursor-pointer"}):e.jsx(js,{className:"text-yellow-400 cursor-pointer"})})]})}const C=()=>{const r=b(qe);let s=!1,t="user";if(r){const a=Ps(r),{username:n,roles:o,wallet:l,email:x}=a.userInfo;return s=o.includes("admin"),s&&(t="admin"),{username:n,roles:o,wallet:l,email:x,isAdmin:s,status:t}}return{username:"",roles:[],wallet:"",email:"",isAdmin:s,status:t}};function tt(){const s={...C(),dashTip:"Admin Dashboard"};return e.jsxs("div",{className:"profile-header",children:[e.jsx(Ke,{username:s.username,dashTip:s.dashTip}),e.jsx(We,{username:s.username}),e.jsx(Be,{username:s.username})]})}function rt(){return e.jsxs("div",{className:"content-container",children:[e.jsx(tt,{}),e.jsx("div",{className:"outlet-wrapper",children:e.jsx(w,{})})]})}const at=N.injectEndpoints({endpoints:r=>({addNewUser:r.mutation({query:s=>({url:"auth/signup",method:"POST",body:s}),invalidatesTags:[{type:"User",id:"LIST"}]}),login:r.mutation({query:s=>({url:"auth",method:"POST",body:s})}),sendLogout:r.mutation({query:()=>({url:"auth/logout",method:"POST"}),async onQueryStarted(s,t){try{await t.queryFulfilled,t.dispatch(zs({})),setTimeout(()=>{t.dispatch(N.util.resetApiState())},1e3)}catch(a){console.error(a)}}}),refresh:r.mutation({query:()=>({url:"auth/refresh",method:"GET"}),async onQueryStarted(s,{dispatch:t,queryFulfilled:a}){try{const{data:n}=await a,{accessToken:o}=n;t(oe({accessToken:o}))}catch(n){console.error(n)}}})})}),{useAddNewUserMutation:$r,useLoginMutation:nt,useRefreshMutation:ot,useSendLogoutMutation:Z}=at,He=i.createContext(void 0);function it({children:r}){const{username:s,email:t}=C(),[a,n]=i.useState(!0),[o]=Z(),l=O(),[x,d]=i.useState(!1),c=s==null?void 0:s.substring(0,2).toLocaleUpperCase();return e.jsx("aside",{className:"h-screen",children:e.jsxs("nav",{className:"h-full flex flex-col lg:border-r shadow-sm",children:[e.jsxs("div",{className:"p-4 pb-2 flex justify-between items-center",children:[e.jsx("img",{src:"/images/gtx-stream-logo1.png",className:`overflow-hidden transition-all ${a?"w-32":"w-0"}`,alt:""}),e.jsx("button",{onClick:()=>{n(u=>!u)},className:"max-sm:hidden p-1.5 rounded-lg bg-gray-50 hover:bg-gray-100",children:a?e.jsx(Le,{color:"black"}):e.jsx(Ae,{color:"#000"})}),e.jsx("button",{onClick:()=>{d(!x)},className:"lg:hidden md:hidden p-1.5 rounded-lg bg-gray-50 hover:bg-gray-100",children:x?e.jsx(Ue,{color:"#000"}):e.jsx(Ee,{color:"#000"})})]}),e.jsx(He.Provider,{value:{expanded:a},children:x?e.jsx("ul",{className:"open flex-1 px-3 lg:hidden",children:r}):e.jsx("ul",{className:"flex-1 px-3 max-sm:hidden",children:r})}),e.jsxs("div",{className:"border-t flex p-3 sidebar-userinfo",children:[e.jsx(_e,{initials:c,borderRadius:8,width:50,height:50,background:"#27275a"}),e.jsxs("div",{className:`
              flex justify-between items-center
              overflow-hidden transition-all ${a?"w-52 ml-3":"w-0"}
          `,children:[e.jsxs("div",{className:"leading-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-100",children:[" ",s," "]}),e.jsxs("span",{className:"text-xs text-gray-100",children:[" ",t," "]})]}),e.jsx(Y,{className:"text-gray-200 cursor-pointer",onClick:async u=>{await o(null),l("/admin")}})]})]})]})})}function P({icon:r,label:s,active:t,alert:a,link:n}){const{expanded:o}=i.useContext(He);return e.jsx(v,{to:n,children:e.jsxs("li",{className:`
		  relative flex items-center py-2 px-3 my-1
		  font-medium rounded-md cursor-pointer
		  transition-colors group
		  ${t?"bg-gradient-to-tr from-sky-200 to-sky-100 text-sky-700":"hover:bg-gradient-to-tr from-indigo-900 to-indigo-700 text-gray-100"}
	  `,children:[r,e.jsx("span",{className:`overflow-hidden transition-all ${o?"w-52 ml-3":"w-0"}`,children:s}),a&&e.jsx("div",{className:`absolute right-2 w-2 h-2 rounded bg-sky-400 ${o?"":"top-2"}`}),!o&&e.jsx("div",{className:`
			absolute left-full rounded-md px-2 py-1 ml-6
			bg-sky-100 text-sky-800 text-sm
			invisible opacity-20 -translate-x-3 transition-all
			group-hover:visible group-hover:opacity-100 group-hover:translate-x-0
		`,children:s})]})})}function lt(){const r=()=>{O(),Z()},s=ne();return e.jsx("div",{className:"sidebar",children:e.jsxs(it,{children:[e.jsx(P,{icon:e.jsx(Ie,{}),label:"Dashboard",active:s.pathname==="/admindash",link:"/admindash"}),e.jsx(P,{icon:e.jsx(Pe,{}),label:"Users",active:s.pathname==="/admindash/users",link:"/admindash/users"}),e.jsx(P,{icon:e.jsx(ys,{}),label:"Affiliates",active:s.pathname==="/admindash/affiliates",link:"/admindash/affiliates"}),e.jsx(P,{icon:e.jsx(we,{}),label:"Domains",active:s.pathname==="/admindash/domains",link:"/admindash/domains"}),e.jsx(P,{icon:e.jsx(Re,{}),label:"Airdrop",active:s.pathname==="/admindash/users/tasks",link:"/admindash/users/tasks"}),e.jsxs("li",{className:"lg:hidden md:hidden logout-link cursor-pointer text-gray-900",onClick:r,children:[e.jsx(Y,{fontSize:"medium"})," ",e.jsx("span",{children:"Logout"})]})]})})}function ct(){return e.jsxs("div",{className:"page dash-layout",children:[e.jsx(lt,{}),e.jsx(rt,{})]})}const q=J({}),G=q.getInitialState(),le=N.injectEndpoints({endpoints:r=>({getAdminStats:r.query({query:()=>({url:"stats/admin",validateStatus:(s,t)=>s.status===200&&!t.isError}),transformResponse(s,t,a){const n=s.map(o=>(o.id=ye(),o));return q.setAll(G,n)},forceRefetch({currentArg:s,previousArg:t}){return s!==t}}),getUserStats:r.query({query:s=>({url:`stats/${s}`,validateStatus:(t,a)=>t.status===200&&!a.isError}),transformResponse(s,t,a){const n=s.map(o=>(o.id=ye(),o));return q.setAll(G,n)},forceRefetch({currentArg:s,previousArg:t}){return s!==t}})})}),{useGetAdminStatsQuery:dt,useGetUserStatsQuery:ut}=le,mt=le.endpoints.getAdminStats.select(),ht=k(mt,r=>r.data),ft=q.getSelectors(r=>ht(r)??G);function xt({data:r}){return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"text-block",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-50",children:r.label}),e.jsxs("h2",{className:"font-bold text-2xl text-gray-50",children:[" ",r.value," "]})]}),e.jsx("div",{className:"icon-block",children:e.jsx("box-icon",{size:"lg",type:r.icon==="globe"?"regular":"solid",name:r.icon,color:"rgba(206, 206, 208, 0.5)"})})]})}function pt(){const{isSuccess:r}=dt(),s=b(ft.selectAll);let t=[];return r&&(t=[{id:1,label:"Total Signups",value:s[0].totalusers,iconType:"user",icon:"group"},{id:2,label:"Total Domains",value:s[0].totalDomains,iconType:"domain",icon:"diamond"},{id:3,label:"Signups Today",value:s[0].todayUsers,iconType:"user",icon:"group"},{id:4,label:"Domains Today",value:s[0].todayDomains,iconType:"domain",icon:"diamond"}]),e.jsx("div",{className:"stat-block",children:t.map((a,n)=>e.jsx(xt,{data:a},a.id))})}const F=J({}),V=F.getInitialState(),ee=N.injectEndpoints({endpoints:r=>({getUsers:r.query({query:()=>({url:"users",validateStatus:(s,t)=>s.status===200&&!t.isError}),transformResponse(s,t,a){const n=s.map(o=>(o.id=o._id,o));return F.setAll(V,n)},providesTags(s,t,a){return s!=null&&s.ids?[{type:"User",id:"LIST"},...s.ids.map(n=>({type:"User",id:n}))]:[{type:"User",id:"LIST"}]},forceRefetch({currentArg:s,previousArg:t}){return s!==t}}),getUserReferrals:r.query({query:s=>({url:`users/referrals/${s}`,validateStatus:(t,a)=>t.status===200&&!a.isError}),transformResponse(s,t,a){const n=s.map(o=>(o.id=o._id,o));return F.setAll(V,n)},providesTags(s,t,a){return s!=null&&s.ids?[{type:"User",id:"LIST"},...s.ids.map(n=>({type:"User",id:n}))]:[{type:"User",id:"LIST"}]},forceRefetch({currentArg:s,previousArg:t}){return s!==t}}),addNewUser:r.mutation({query:s=>({url:"users",method:"POST",body:s}),invalidatesTags:[{type:"User",id:"LIST"}]}),updateUser:r.mutation({query:({id:s,data:t})=>({url:`users/${s}`,method:"PATCH",body:t}),invalidatesTags:(s,t,a)=>[{type:"User",id:a.id}]}),deleteUser:r.mutation({query:({id:s})=>({url:`/users/${s}`,method:"DELETE",body:s}),invalidatesTags:(s,t,a)=>[{type:"User",id:a.id}]})})}),{useGetUsersQuery:Qe,useGetUserReferralsQuery:ze,useAddNewUserMutation:Mr,useUpdateUserMutation:qr,useDeleteUserMutation:Fr,usePrefetch:Or}=ee,gt=ee.endpoints.getUsers.select(),jt=k(gt,r=>r.data);ee.endpoints.getUserReferrals.select("id");const Ge=F.getSelectors(r=>jt(r)??V);function yt(){const[r,s]=i.useState([]),[t,a]=i.useState(""),{isLoading:n,isFetching:o,isSuccess:l,isError:x,error:d}=Qe(),c=b(Ge.selectAll);let u;if((n||o)&&(u=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsx(R,{})})),x&&"status"in d){const h="error"in d?d.error:d.data.message;u=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsxs("p",{className:"errmsg",children:[`${h}`,d.status===403&&e.jsx(v,{style:{fontWeight:"bold"},to:"/",children:"Please login"})]})})}return i.useCallback(B(h=>{a(h)}),[]),i.useEffect(()=>{if(l)try{const h=c.filter(m=>t.toLowerCase()===""?m:m.username.toLowerCase().includes(t));s(h)}catch(h){console.log(h)}},[t,c]),l&&(u=e.jsxs("div",{className:"dashboard-page",children:[e.jsx(pt,{}),e.jsx(L,{cols:X,data:r})]})),u}const A=J({}),$=A.getInitialState(),ce=N.injectEndpoints({endpoints:r=>({getDomains:r.query({query:()=>({url:"domains",validateStatus:(s,t)=>s.status===200&&!t.isError}),transformResponse(s,t,a){const n=s.map(o=>(o.id=o._id,o));return A.setAll($,n)},providesTags(s,t,a){return s!=null&&s.ids?[{type:"Domain",id:"LIST"},...s.ids.map(n=>({type:"Domain",id:n}))]:[{type:"Domain",id:"LIST"}]},forceRefetch({currentArg:s,previousArg:t}){return s!==t}}),getUserDomains:r.query({query:s=>({url:`domains/${s}`,validateStatus:(t,a)=>t.status===200&&!a.isError}),transformResponse(s,t,a){const n=s.map(o=>(o.id=o._id,o));return A.setAll($,n)},providesTags(s,t,a){return s!=null&&s.ids?[{type:"Domain",id:"LIST"},...s.ids.map(n=>({type:"Domain",id:n}))]:[{type:"Domain",id:"LIST"}]},forceRefetch({currentArg:s,previousArg:t}){return s!==t}}),getUserReferralsDomains:r.query({query:s=>({url:`users/referrals/domains/${s}`,validateStatus:(t,a)=>t.status===200&&!a.isError}),transformResponse(s,t,a){const n=s.map(o=>(o.id=o._id,o));return A.setAll($,n)},providesTags(s,t,a){return s!=null&&s.ids?[{type:"Domain",id:"LIST"},...s.ids.map(n=>({type:"Domain",id:n}))]:[{type:"Domain",id:"LIST"}]},forceRefetch({currentArg:s,previousArg:t}){return s!==t}})})}),{useGetDomainsQuery:bt,useGetUserDomainsQuery:_r,useGetUserReferralsDomainsQuery:vt}=ce,St=ce.endpoints.getDomains.select(),Nt=k(St,r=>r.data),Ct=A.getSelectors(r=>Nt(r)??$);function Tt(){const[r,s]=i.useState([]),[t,a]=i.useState(""),{isLoading:n,isFetching:o,isSuccess:l,isError:x,error:d}=bt(),c=b(Ct.selectAll);let u;if((n||o)&&(u=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsx(R,{})})),x&&"status"in d){const m="error"in d?d.error:d.data.message;u=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsxs("p",{className:"errmsg",children:[`${m}`,d.status===403&&e.jsx(v,{style:{fontWeight:"bold"},to:"/",children:"Please login"})]})})}const h=i.useCallback(ke(m=>{a(m)}),[]);return i.useEffect(()=>{if(l)try{const m=c.filter(f=>t.toLowerCase()===""?f:f.username.toLowerCase().includes(t));s(m)}catch(m){console.log(m)}},[t,c]),l&&(u=e.jsxs("div",{className:"domainslist-page",style:{display:"flex",flexDirection:"column",gap:50,marginTop:80},children:[e.jsx(_,{changeHandler:h,label:"Search domains by owner"}),e.jsx(L,{cols:$e,data:r})]})),u}function ve(){return e.jsx("div",{children:"EditDomain"})}const Dt=()=>e.jsx("div",{className:"signup-page",children:e.jsxs("div",{className:"form-wrapper",children:[e.jsx("h2",{className:"font-bold",children:"Error 404 - Page Not Found"}),e.jsx("p",{children:"The page you are trying to access does not exist."}),e.jsx("p",{className:"errmsg",children:e.jsx(v,{style:{fontWeight:"bold",textAlign:"right"},to:"/",children:"You can login here"})})]})});function wt(r,s,t){const[a,n]=i.useState(()=>{const o=localStorage.getItem(s);if(o===null)return r;try{const l=JSON.parse(o);return t?t(l):l}catch{return console.error("error parsing saved state from useStickyState"),r}});return i.useEffect(()=>{localStorage.setItem(s,JSON.stringify(a))},[s,a]),[a,n]}function Rt(){const[r]=wt("true","persit"),s=b(qe),t=i.useRef(!1),[a,n]=i.useState(!1),[o,{isUninitialized:l,isLoading:x,isSuccess:d,isError:c,error:u}]=ot();i.useEffect(()=>(t.current,!s&&r&&(async()=>{try{await o(),n(!0)}catch{}})().then(f=>{console.log(f)}).catch(f=>{console.log(f)}),()=>{t.current=!0}),[]);let h;if(!r)h=e.jsx(w,{});else if(x)h=e.jsxs("div",{className:"loading-state",style:{width:"100vw",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("p",{children:"Contacting backend"}),e.jsx(ae,{sx:{width:"100%"},children:e.jsx(bs,{})})]});else if(c&&"status"in u){const m="error"in u?u.error:u.data.message;u.status==="FETCH_ERROR"?h=e.jsx("div",{className:"err-cta",style:{fontWeight:"bold"},children:e.jsx("div",{className:"errmsg",children:e.jsx("p",{children:"Our Servers are down at the moment. Check back later."})})}):h=e.jsx("div",{className:"err-cta",style:{fontWeight:"bold"},children:e.jsxs("div",{className:"errmsg",children:[e.jsx("h3",{children:`${m} `}),e.jsx(v,{style:{fontWeight:"bold"},to:"/",children:"Please login again"})]})})}else d&&a?h=e.jsx(w,{}):s&&l&&(h=e.jsx(w,{}));return h}function Se({permitedRoles:r}){const s=ne(),{username:t,roles:a}=C();let n;return t||(n=e.jsx(je,{to:"/",state:{from:s},replace:!0})),(a==null?void 0:a.some(l=>r.includes(l)))?n=e.jsx(w,{}):n=e.jsx(je,{to:"/",state:{from:s},replace:!0}),n}function Ve(r,s){r.innerHTML=s,Array.from(r.querySelectorAll("script")).forEach(t=>{const a=document.createElement("script");Array.from(t.attributes).forEach(n=>{a.setAttribute(n.name,n.value)}),a.appendChild(document.createTextNode(t.innerHTML)),t.parentNode.replaceChild(a,t)})}const Ye='<a class="e-widget no-button" href="https://gleam.io/S7oyH/gravityx-airdrop" rel="nofollow">GravityX Airdrop</a><script type="text/javascript" src="https://widget.gleamjs.io/e.js" async="true"><\/script>';function kt(){return i.useEffect(()=>{Ve(document.querySelector("#gleam_competition"),Ye)},[]),e.jsx("div",{className:"task-page",children:e.jsx("div",{id:"gleam_competition"})})}function Lt(){const s={...C(),dashTip:"Explore your Dashboard"};return e.jsxs("div",{className:"profile-header",children:[e.jsx(Ke,{username:s.username,dashTip:s.dashTip}),e.jsx(We,{username:s.username}),e.jsx(Be,{username:s.username})]})}function At(){return e.jsxs("div",{className:"content-container",children:[e.jsx(Lt,{}),e.jsx("div",{className:"outlet-wrapper",children:e.jsx(w,{})})]})}function Ut({initials:r,borderRadius:s=60,width:t=60,height:a=60,background:n="#141441"}){return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",background:n,borderRadius:s,width:t,height:a},children:e.jsxs("h4",{className:"text-white font-bold",children:[" ",r," "]})})}const Je=i.createContext(void 0);function Et({children:r}){const[s,t]=i.useState(!0),{username:a,email:n}=C(),[o]=Z(),l=O(),x=a==null?void 0:a.substring(0,2).toLocaleUpperCase(),[d,c]=i.useState(!1);return e.jsx("aside",{className:"h-screen desktop-menu",children:e.jsxs("nav",{className:"h-full flex flex-col  lg:border-r shadow-sm sidebar-style",children:[e.jsxs("div",{className:"p-4 pb-2 flex justify-between items-center",children:[e.jsx("img",{src:"/images/gtx-stream-logo1.png",className:`overflow-hidden transition-all ${s?"w-32":"w-0"}`,alt:""}),e.jsx("button",{onClick:()=>{t(u=>!u)},className:"max-sm:hidden p-1.5 rounded-lg bg-gray-50 hover:bg-gray-100",children:s?e.jsx(Le,{color:"black"}):e.jsx(Ae,{color:"#000"})}),e.jsx("button",{onClick:()=>{c(!d)},className:"lg:hidden md:hidden p-1.5 rounded-lg bg-gray-50 hover:bg-gray-100",children:d?e.jsx(Ue,{color:"#000"}):e.jsx(Ee,{color:"#000"})})]}),e.jsx(Je.Provider,{value:{expanded:s},children:d?e.jsx("ul",{className:"open flex-1 px-3 lg:hidden",children:r}):e.jsx("ul",{className:"flex-1 px-3 max-sm:hidden",children:r})}),e.jsxs("div",{className:"border-t border-b flex p-3 sidebar-userinfo",children:[e.jsx(Ut,{initials:x,borderRadius:8,width:50,height:50,background:"#27275a"}),e.jsxs("div",{className:`
              flex justify-between items-center
              overflow-hidden transition-all ${s?"w-52 ml-3":"w-0"}
          `,children:[e.jsxs("div",{className:"leading-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-100",children:[" ",a," "]}),e.jsxs("span",{className:"text-xs text-gray-100",children:[" ",n," "]})]}),e.jsx(Y,{className:"text-gray-200 cursor-pointer",onClick:async u=>{await o(null),l("/")}})]})]})]})})}function Q({icon:r,label:s,active:t,alert:a,link:n}){const{expanded:o}=i.useContext(Je);return e.jsx(v,{to:n,children:e.jsxs("li",{className:`
		  relative flex items-center py-2 px-3 my-1
		  font-medium rounded-md cursor-pointer
		  transition-colors group
		  ${t?"bg-gradient-to-tr from-sky-200 to-sky-100 text-sky-700":"hover:bg-gradient-to-tr from-indigo-900 to-indigo-700 text-gray-100"}
	  `,children:[r,e.jsx("span",{className:`overflow-hidden transition-all ${o?"w-52 ml-3":"w-0"}`,children:s}),a&&e.jsx("div",{className:`absolute right-2 w-2 h-2 rounded bg-sky-400 ${o?"":"top-2"}`}),!o&&e.jsx("div",{className:`
			absolute left-full rounded-md px-2 py-1 ml-6
			bg-sky-100 text-sky-800 text-sm
			invisible opacity-20 -translate-x-3 transition-all
			group-hover:visible group-hover:opacity-100 group-hover:translate-x-0
		`,children:s})]})})}function It(){const r=O(),[s]=Z(),t=async()=>{await s(null),r("/")},a=ne();return e.jsx("div",{className:"sidebar",children:e.jsxs(Et,{children:[e.jsx(Q,{icon:e.jsx(Ie,{}),label:"Dashboard",active:a.pathname==="/dash",link:"/dash"}),e.jsx(Q,{icon:e.jsx(Pe,{}),label:"Referrals",active:a.pathname==="/dash/users",link:"/dash/users"}),e.jsx(Q,{icon:e.jsx(we,{}),label:"Domains",active:a.pathname==="/dash/domains",link:"/dash/domains"}),e.jsx(Q,{icon:e.jsx(Re,{}),label:"Airdrop",active:a.pathname==="/dash/users/tasks",link:"/dash/users/tasks"}),e.jsxs("li",{className:"lg:hidden md:hidden logout-link cursor-pointer text-gray-900",onClick:t,children:[e.jsx(Y,{fontSize:"medium"})," ",e.jsx("span",{children:"Logout"})]})]})})}function Pt(){return e.jsxs("div",{className:"page dash-layout",children:[e.jsx(It,{}),e.jsx(At,{})]})}function $t({data:r}){return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"text-block",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-50",children:r.label}),e.jsxs("h2",{className:"font-bold text-2xl text-gray-50",children:[" ",r.value," "]})]}),e.jsx("div",{className:"icon-block",children:e.jsx("box-icon",{size:"lg",type:r.icon==="globe"?"regular":"solid",name:r.icon,color:"rgba(206, 206, 208, 0.5)"})})]})}function Mt(r){return i.useMemo(()=>{const s=le.endpoints.getUserStats.select(r),t=k([s],a=>a.data);return q.getSelectors(a=>t(a)??G)},[r])}function qt(){const r=C(),{isSuccess:s}=ut(r.username),t=Mt(r.username),a=b(t.selectAll);let n=[];return s&&(n=[{id:1,label:"Total Signups",value:a[0].totalusers,iconType:"user",icon:"group"},{id:2,label:"Total Points",value:a[0].totalusers,iconType:"user",icon:"award"},{id:3,label:"Total Domains",value:a[0].totalDomains,iconType:"domain",icon:"diamond"},{id:4,label:"Signups Today",value:a[0].todayUsers,iconType:"user",icon:"group"},{id:5,label:"Domains Today",value:a[0].todayDomains,iconType:"domain",icon:"diamond"}]),e.jsx("div",{className:"stat-block",children:n.map((o,l)=>e.jsx($t,{data:o},o.id))})}function Xe(r){return i.useMemo(()=>{const s=ee.endpoints.getUserReferrals.select(r),t=k([s],a=>a.data);return F.getSelectors(a=>t(a)??V)},[r])}function Ft(){const[r,s]=i.useState([]),[t,a]=i.useState(""),n=C(),{isLoading:o,isFetching:l,isSuccess:x,isError:d,error:c}=ze(n.username),u=Xe(n.username),h=b(u.selectAll);let m;if((o||l)&&(m=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsx(R,{})})),d&&"status"in c){const f="error"in c?c.error:c.data.message;m=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsxs("p",{className:"errmsg",children:[`${f}`,c.status===403&&e.jsx(v,{style:{fontWeight:"bold"},to:"/",children:"Please login"})]})})}return i.useCallback(B(f=>{a(f)}),[]),i.useEffect(()=>{if(x)try{const f=h.filter(p=>t.toLowerCase()===""?p:p.username.toLowerCase().includes(t));s(f)}catch(f){console.log(f)}},[t,h]),x&&(m=e.jsxs("div",{className:"dashboard-page",children:[e.jsx(qt,{}),e.jsx(L,{cols:X,data:r})]})),m}function Ot(r){return i.useMemo(()=>{const s=ce.endpoints.getUserReferralsDomains.select(r),t=k([s],a=>a.data);return A.getSelectors(a=>t(a)??$)},[r])}function _t(){const[r,s]=i.useState([]),[t,a]=i.useState(""),n=C(),{isLoading:o,isFetching:l,isSuccess:x,isError:d,error:c}=vt(n.username),u=Ot(n.username),h=b(u.selectAll);let m;if((o||l)&&(m=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsx(R,{})})),d&&"status"in c){const p="error"in c?c.error:c.data.message;m=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsxs("p",{className:"errmsg",children:[`${p}`,c.status===403&&e.jsx(v,{style:{fontWeight:"bold"},to:"/",children:"Please login"})]})})}const f=i.useCallback(ke(p=>{a(p)}),[]);return i.useEffect(()=>{if(x)try{const p=h.filter(y=>t.toLowerCase()===""?y:y.name.toLowerCase().includes(t));s(p)}catch(p){console.log(p)}},[t,h]),x&&(m=e.jsxs("div",{className:"domainslist-page",style:{display:"flex",flexDirection:"column",gap:50,marginTop:80},children:[e.jsx(_,{changeHandler:f,label:"Search domains by name"}),e.jsx(L,{cols:$e,data:r})]})),m}const Br=j.object({firstName:j.string().min(2,{message:"Requires at least 2 characters"}),lastName:j.string().min(2,{message:"Requires at least 2 characters"}),username:j.string().min(3,{message:"Requires at least 3 characters"}),password:j.string().min(8,{message:"Requires at least 8 characters"}),email:j.string().email({message:"Invalid email addreess"}),wallet:j.string().regex(/^0x/,"Invalid Wallet address - use a polygon chain address").min(10,{message:"A valid wallet address is required"}).optional(),referrerUsername:j.string().min(3,{message:"Referrer username is Required"}),terms:j.boolean()}).superRefine(({terms:r},s)=>{r||s.addIssue({code:j.ZodIssueCode.custom,message:"You must accept the terms to proceed",path:["terms"]})}),Bt=j.object({username:j.string().min(3,{message:"Requires at least 3 characters"}),password:j.string().min(8,{message:"Requires at least 8 characters"})});j.object({referrerUsername:j.string().min(3,{message:"A valid referral username is required !"}),wallet:j.string().min(8,{message:"A valid wallet address is required !"}).optional()});const Kt=r=>vs({palette:{mode:r.palette.mode},components:{MuiCheckbox:{styleOverrides:{root:{"&.MuiFormHelperText-root,.Mui-error":{color:"#ffa7a7 !important"}}}},MuiTextField:{styleOverrides:{root:{"--TextField-brandBorderColor":"#E0E3E7","--TextField-brandBorderHoverColor":"#B2BAC2","--TextField-brandBorderFocusedColor":"#6F7E8C","& label.Mui-focused":{color:I[500]},"&.MuiFormHelperText-root,.Mui-error":{color:"#ffa7a7 !important"}}}},MuiOutlinedInput:{styleOverrides:{notchedOutline:{borderColor:I[100]},root:{[`&:hover .${pe.notchedOutline}`]:{borderColor:I[300]},[`&.Mui-focused .${pe.notchedOutline}`]:{borderColor:I[200]}}}},MuiFilledInput:{styleOverrides:{root:{"&::before, &::after":{borderBottom:`2px solid ${I[500]}`},"&:hover:not(.Mui-disabled, .Mui-error):before":{borderBottom:"2px solid var(--TextField-brandBorderHoverColor)"},"&.Mui-focused:after":{borderBottom:"2px solid var(--TextField-brandBorderFocusedColor)"},"&.MuiFilledInput-root":{background:"#fff"}}}}}});function Wt(){var de,ue;const r=Te(),s=O(),t=ts(),[a,{isLoading:n,isSuccess:o,isError:l,error:x}]=nt(),[d,c]=Ce.useState(!1),u=()=>{c(T=>!T)},{register:h,handleSubmit:m,control:f,reset:p,setError:y,formState:{isSubmitting:K,isSubmitSuccessful:W,errors:U}}=$s({mode:"all",resolver:Ms(Bt),defaultValues:{username:"",password:""}});i.useEffect(()=>{o&&s("/dash",{replace:!0})},[o,s]);const es=i.useCallback(async T=>{try{const{accessToken:S}=await a(T).unwrap();t(oe({accessToken:S}))}catch(S){(S==null?void 0:S.status)==="FETCH_ERROR"&&y("root.serverError",{type:"server",message:"Network or internet Error"}),(S==null?void 0:S.status)===404&&y("root.serverError",{type:"server",message:"Invalid Login Credentials"})}},[]);return e.jsxs("div",{children:[e.jsxs("div",{className:"title-wrapper w-full flex justify-between items-center mb-8 ",children:[e.jsx("img",{src:"/images/gtx-stream-logo1.png",className:"w-32",alt:""}),e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-50",children:"Login"})]}),e.jsx(Ss,{theme:Kt(r),children:e.jsx("form",{onSubmit:m(es),children:e.jsxs(ae,{component:"div",sx:{p:"2px 4px",display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:350,boxShadow:0},children:[e.jsx(be,{name:"username",control:f,render:({field:T,fieldState:{error:S},formState:ss})=>{var E;return e.jsx(ge,{id:"username",label:"Username",variant:"filled",type:"text",error:!!U.username,helperText:(E=U.username)==null?void 0:E.message,...T,fullWidth:!0,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ns,{})})}})}}),e.jsx(be,{name:"password",control:f,render:({field:T,fieldState:{error:S},formState:ss})=>{var E;return e.jsx(ge,{id:"password",label:"Password",variant:"filled",type:d?"text":"password",error:!!U.password,helperText:(E=U.password)==null?void 0:E.message,...T,fullWidth:!0,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Cs,{})}),endAdornment:e.jsx(se,{position:"end",children:e.jsx(D,{"aria-label":"toggle password visibility",onClick:u,edge:"end",children:d?e.jsx(Ts,{}):e.jsx(Ds,{})})})}})}}),e.jsx(ws,{type:"submit",variant:"contained",className:"btn",children:"Submit"}),e.jsx("div",{children:e.jsx("p",{style:{fontWeight:"bold"},children:(ue=(de=U.root)==null?void 0:de.serverError)==null?void 0:ue.message})})]})})})]})}function Ht(){return e.jsx("div",{className:"signup-page",children:e.jsx("div",{className:"form-wrapper",children:e.jsx(Wt,{})})})}function Qt(){const[r,s]=i.useState([]),[t,a]=i.useState(""),n=C(),{isLoading:o,isFetching:l,isSuccess:x,isError:d,error:c}=ze(n.username),u=Xe(n.username),h=b(u.selectAll);let m;if((o||l)&&(m=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsx(R,{})})),d&&"status"in c){const p="error"in c?c.error:c.data.message;m=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsxs("p",{className:"errmsg",children:[`${p}`,c.status===403&&e.jsx(v,{style:{fontWeight:"bold"},to:"/",children:"Please login"})]})})}const f=i.useCallback(B(p=>{a(p)}),[]);return i.useEffect(()=>{if(x)try{const p=h.filter(y=>t.toLowerCase()===""?y:y.username.toLowerCase().includes(t));s(p)}catch(p){console.log(p)}},[t,h]),x&&(m=e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80},children:[e.jsx(_,{changeHandler:f,label:"Search by username"}),e.jsx(L,{cols:X,data:r})]})),m}function zt(){return i.useEffect(()=>{Ve(document.querySelector("#gleam_competition"),Ye)},[]),e.jsx("div",{className:"task-page",children:e.jsx("div",{id:"gleam_competition"})})}function Gt(){const[r,s]=i.useState([]),[t,a]=i.useState(""),{isLoading:n,isFetching:o,isSuccess:l,isError:x,error:d}=Qe(),c=b(Ge.selectAll);let u;if((n||o)&&(u=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsx(R,{})})),x&&"status"in d){const m="error"in d?d.error:d.data.message;u=e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80,justifyContent:"center",alignItems:"center"},children:e.jsxs("p",{className:"errmsg",children:[`${m}`,d.status===403&&e.jsx(v,{style:{fontWeight:"bold"},to:"/",children:"Please login again"})]})})}const h=i.useCallback(B(m=>{a(m)}),[]);return i.useEffect(()=>{if(l)try{const m=c.filter(f=>t.toLowerCase()===""?f:f.username.toLowerCase().includes(t));s(m)}catch(m){console.log(m)}},[t,c]),l&&(u=e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:50,marginTop:80},children:[e.jsx(_,{changeHandler:h,label:"Search users"}),e.jsx(L,{cols:X,data:r})]})),u}const Ne={user:"user",manager:"manager",admin:"admin"},Vt=i.lazy(async()=>re(()=>import("./SignupPage-BIxUpNf1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49]))),Yt=i.lazy(async()=>re(()=>import("./SignupSuccessPage-YdpL_RVu.js"),__vite__mapDeps([50,1,2,31,32,22,23,24,25,26,27,28,29,30]))),Jt=i.lazy(async()=>re(()=>import("./LoginPage-SiKkV3TT.js"),__vite__mapDeps([51,1,2,20,21,34,35,22,23,24,25,26,27,28,29,30,31,32,5,6,7,8,9,33,36,37,38,39,40,41,42,43,44,45,46,47,13,48,52]))),Xt=ns(Es(e.jsxs(g,{path:"/",element:e.jsx(st,{}),errorElement:e.jsx(Dt,{}),children:[e.jsx(g,{index:!0,element:e.jsx(Ht,{})}),e.jsx(g,{path:"signup",element:e.jsx(Vt,{})}),e.jsx(g,{path:"admin",element:e.jsx(Jt,{})}),e.jsx(g,{path:"success",element:e.jsx(Yt,{})}),e.jsxs(g,{element:e.jsx(Rt,{}),children:[e.jsx(g,{element:e.jsx(Se,{permitedRoles:[Ne.admin]}),children:e.jsxs(g,{path:"admindash",element:e.jsx(ct,{}),children:[e.jsx(g,{index:!0,element:e.jsx(yt,{})}),e.jsxs(g,{path:"users",children:[e.jsx(g,{index:!0,element:e.jsx(Gt,{})}),e.jsx(g,{path:"tasks",element:e.jsx(kt,{})})]}),e.jsx(g,{path:"affiliates",children:e.jsx(g,{index:!0,element:e.jsx(et,{})})}),e.jsxs(g,{path:"domains",children:[e.jsx(g,{index:!0,element:e.jsx(Tt,{})}),e.jsx(g,{path:":id",element:e.jsx(ve,{})})]})]})}),e.jsx(g,{element:e.jsx(Se,{permitedRoles:[Ne.user]}),children:e.jsxs(g,{path:"dash",element:e.jsx(Pt,{}),children:[e.jsx(g,{index:!0,element:e.jsx(Ft,{})}),e.jsxs(g,{path:"users",children:[e.jsx(g,{index:!0,element:e.jsx(Qt,{})}),e.jsx(g,{path:"tasks",element:e.jsx(zt,{})})]}),e.jsxs(g,{path:"domains",children:[e.jsx(g,{index:!0,element:e.jsx(_t,{})}),e.jsx(g,{path:":id",element:e.jsx(ve,{})})]})]})})]})]}))),Ze=As({reducer:{[N.reducerPath]:N.reducer,auth:Gs},middleware:r=>r().concat(N.middleware),devTools:!0});Us(Ze.dispatch);qs();as.createRoot(document.getElementById("root")).render(e.jsx(Ce.StrictMode,{children:e.jsx(rs,{store:Ze,children:e.jsx(os,{router:Xt})})}));export{nt as a,oe as b,Kt as c,Bt as l,Br as s,$r as u};
